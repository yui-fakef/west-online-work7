<%
// 确保变量存在
const postList = typeof posts !== 'undefined' ? posts : [];
const paginationData = typeof pagination !== 'undefined' ? pagination : { 
  currentPage: 1, 
  totalPages: 1, 
  prev: null, 
  next: null 
};

let bodyContent = `<section class="posts">
  <h1>文章列表</h1>`;
  
if (postList.length === 0) {
  bodyContent += `<p>暂无文章</p>`;
} else {
  bodyContent += `<ul class="post-list">`;
  
  postList.forEach(post => {
    bodyContent += `
      <li>
        <h2><a href="${post.url}">${post.title}</a></h2>
        <p class="date">发布日期: ${post.date}</p>
        <div class="excerpt">${post.excerpt}</div>
        <a href="${post.url}" class="read-more">阅读全文</a>
      </li>`;
  });
  
  bodyContent += `</ul>`;
}

// 添加分页导航
if (paginationData.totalPages > 1) {
  bodyContent += `<div class="pagination">`;
  
  if (paginationData.prev) {
    bodyContent += `<a href="${paginationData.prev === 1 ? 'index.html' : `page/${paginationData.prev}/index.html`}" class="prev">上一页</a>`;
  }
  
  bodyContent += `<span>第 ${paginationData.currentPage} 页 / 共 ${paginationData.totalPages} 页</span>`;
  
  if (paginationData.next) {
    bodyContent += `<a href="page/${paginationData.next}/index.html" class="next">下一页</a>`;
  }
  
  bodyContent += `</div>`;
}

bodyContent += `</section>`;
%>

<%- include('base', { 
  title: '首页',
  bodyContent: bodyContent 
}) %>